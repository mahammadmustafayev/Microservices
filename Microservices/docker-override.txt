
   
   basket.api:
     container_name: basket.api
     environment:
       - ASPNETCORE_ENVIRONMENT=Development
       - IdentityServerURL=http://identityserver.api
       - RedisSettings:Port=6379
       - RedisSettings:Host=basketdb
     ports:
       - "5013:80"
     depends_on:
       - basketdb
   photostock.api:
     container_name: photostock.api
     environment:
       - ASPNETCORE_ENVIRONMENT=Development
       - IdentityServerURL=http://identityserver.api
     ports:
       - "5012:80"
     volumes:
       - type: bind
         source: C:\Users\f-cak\Desktop\photos
         target: /app/wwwroot/photos
   discount.api:
     container_name: discount.api
     environment:
       - ASPNETCORE_ENVIRONMENT=Development
       - IdentityServerURL=http://identityserver.api
       - "ConnectionStrings:PostgreSql=User ID=admin; Password=Password12*; Server=discountdb; Port=5432;Database=discountdb;Integrated Security=true;Pooling=true"
     ports:
       - "5014:80"
     depends_on:
       - discountdb
   fakepayment.api:
     container_name: fakepayment.api
     environment:
       - ASPNETCORE_ENVIRONMENT=Development
       - IdentityServerURL=http://identityserver.api
       - RabbitMQUrl=rabbitmq
     ports:
       - "5016:80"
   order.api:
     container_name: order.api
     restart: on-failure
     environment:
       - ASPNETCORE_ENVIRONMENT=Development
       - IdentityServerURL=http://identityserver.api
       - RabbitMQUrl=rabbitmq
       - "ConnectionStrings:DefaultConnection=Server=orderdb,1433;Database=OrderDb; User=sa; Password=Password12*"
     ports:
       - "5015:80"
     depends_on:
       - orderdb
   gateway.api:
     container_name: gateway.api
     environment:
       - ASPNETCORE_ENVIRONMENT=Production
       - IdentityServerURL=http://identityserver.api
     ports:
       - "5000:80"
   aspnetcoremvc.web:
     container_name: aspnetcoremvc.web
     environment:
       - ASPNETCORE_ENVIRONMENT=Development
       - ServiceApiSettings:IdentityBaseUri=http://identityserver.api
       - ServiceApiSettings:GatewayBaseUri=http://gateway.api

     ports:
       - "5010:80"
     depends_on:
       - gateway.api
       - identityserver.api
       - catalog.api
       - basket.api
       - discount.api
       - order.api
       - photostock.api
       - fakepayment.api